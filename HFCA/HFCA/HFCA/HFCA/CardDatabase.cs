using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Threading.Tasks;
using HFCA;
using SQLite;

namespace HFCA
{
    public class CardDatabase
    {
        readonly SQLiteAsyncConnection _database;

        public CardDatabase(string dbPath)
        {
            _database = new SQLiteAsyncConnection(dbPath);
#if DEBUG
            _database.DropTableAsync<Card>().Wait();
#endif
            var result = _database.CreateTableAsync<Card>().Result;
            if (result == CreateTableResult.Created)
                _database.InsertAllAsync(Data);
        }

        public ObservableCollection<Card> GetCards()
        {
            return new ObservableCollection<Card>(_database.Table<Card>().ToListAsync().Result);
        }

        public Task<Card> GetCard(int id)
        {
            return _database.GetAsync<Card>(id);
        }

        private List<Card> Data => new List<Card>()
        {
            new Card()
            {
                ID = 1,
                OtherSideId = 2,
                SpectralType = SpectralType.V,
                Name = "Ablative Plate\r\n",
                Type = CardType.Thruster,
                Mass = 1,
                RadHard = 7,
                Thrust = 2,
                FuelUse = 2,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "XB",
            },
            new Card()
            {
                ID = 2,
                OtherSideId = 1,
                Name = "Ablative Nozzle",
                SpectralType= SpectralType.V,
                Mass = 0,
                RadHard = 8,
                Type = CardType.Thruster,
                Thrust= 3,
                FuelUse = 2,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "X~B",
            },
            new Card()
            {
                ID = 3,
                OtherSideId = 4,
                Name = "De Laval Nozzle",
                SpectralType= SpectralType.M,
                Mass = 0,
                RadHard = 6,
                Type = CardType.Thruster,
                Thrust= 5,
                FuelUse = 4,
                FreeTurns = 0,
                AfterBurn = 2,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "~B",
            },
            new Card()
            {
                ID = 4,
                OtherSideId = 3,
                Name = "Magnetic Nozzle",
                SpectralType= SpectralType.M,
                Mass = 0,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust= 3,
                FuelUse = 1,
                FreeTurns = 0,
                AfterBurn = 3,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "~",
            },
            new Card()
            {
                ID = 5,
                OtherSideId = 6,
                Name = "Dumbo",
                SpectralType= SpectralType.S,
                Mass = 0,
                RadHard = 7,
                Type = CardType.Thruster,
                Thrust= 6,
                FuelUse = 5,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "~B",
            },
            new Card()
            {
                ID = 6,
                OtherSideId = 5,
                Name = "Timberwind",
                SpectralType= SpectralType.S,
                Mass = 0,
                RadHard = 7,
                Type = CardType.Thruster,
                Thrust= 5,
                FuelUse = 3,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "X~B",
            },
            new Card()
            {
                ID = 7,
                OtherSideId = 8,
                Name = "Hall Effect",
                SpectralType= SpectralType.C,
                Mass = 2,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust= 3,
                FuelUse = 2,
                FreeTurns = 0,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "e",
            },
            new Card()
            {
                ID = 8,
                OtherSideId = 7,
                Name = "Ion Drive",
                SpectralType= SpectralType.C,
                Mass = 1,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust= 2,
                FuelUse = 0.5d,
                FreeTurns = 1,
                AfterBurn = 1,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "e",
            },
            new Card()
            {
                ID = 9,
                OtherSideId = 10,
                Name = "Mass Driver",
                SpectralType= SpectralType.M,
                Mass = 3,
                RadHard = 8,
                Type = CardType.Thruster,
                Thrust= 4,
                FuelUse = 3,
                FreeTurns = 0,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "c",
            },
            new Card()
            {
                ID = 10,
                OtherSideId = 9,
                Name = "MPD T-wave",
                SpectralType= SpectralType.M,
                Mass = 1,
                RadHard = 9,
                Type = CardType.Thruster,
                Thrust= 2,
                FuelUse = 0.5d,
                FreeTurns = 0,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "c",
            },
            new Card()
            {
                ID = 11,
                OtherSideId = 12,
                Name = "Metastable Helium",
                SpectralType= SpectralType.V,
                Mass = 1,
                RadHard = 0,
                Type = CardType.Thruster,
                Thrust= 5,
                FuelUse = 1,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "Xt",
            },
            new Card()
            {
                ID = 12,
                OtherSideId = 11,
                Name = "n-6Li Microfission",
                SpectralType= SpectralType.V,
                Mass = 1,
                RadHard = 8,
                Type = CardType.Thruster,
                Thrust= 5,
                FuelUse = 0.5d,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "Xt",
            },
            new Card()
            {
                ID = 13,
                OtherSideId = 14,
                Name = "Monoatomic Plug Nozzle",
                SpectralType= SpectralType.M,
                Mass = 0,
                RadHard = 6,
                Type = CardType.Thruster,
                Thrust= 4,
                FuelUse = 3,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "~",
            },
            new Card()
            {
                ID = 14,
                OtherSideId = 13,
                Name = "Vortex Confined Nozzle",
                SpectralType= SpectralType.M,
                Mass = 0,
                RadHard = 7,
                Type = CardType.Thruster,
                Thrust= 4,
                FuelUse = 2,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "~t",
            },
            new Card()
            {
                ID = 15,
                OtherSideId = 16,
                Name = "Photon Heliogyro",
                SpectralType= SpectralType.C,
                Mass = 0,
                RadHard = 1,
                Type = CardType.Thruster,
                Thrust= 0,
                FuelUse = 0,
                FreeTurns = 1,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
                Ability = "Aerobrake decommission. Immune to Flare & Belt Rolls.",
            },
            new Card()
            {
                ID = 16,
                OtherSideId = 15,
                Name = "Electric Sail",
                SpectralType= SpectralType.C,
                Mass = 0,
                RadHard = 2,
                Type = CardType.Thruster,
                Thrust= 2,
                FuelUse = 0,
                FreeTurns = 1,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
                Ability = "Aerobrake decommission. Immune to Flare & Belt Rolls.",
            },
            new Card()
            {
                ID = 17,
                OtherSideId = 18,
                Name = "Photon Kite Sail",
                SpectralType= SpectralType.C,
                Mass = 0,
                RadHard = 0,
                Type = CardType.Thruster,
                Thrust= 0,
                FuelUse = 0,
                FreeTurns = 1,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
                Ability = "Aerobrake decommission. Immune to Flare & Belt Rolls.",
            },
            new Card()
            {
                ID = 18,
                OtherSideId = 17,
                Name = "Mag Sail",
                SpectralType= SpectralType.C,
                Mass = 0,
                RadHard = 4,
                Type = CardType.Thruster,
                Thrust= 1,
                FuelUse = 0,
                FreeTurns = 1,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
                Ability = "Aerobrake decommission. Each Radiation Belt entered = Bonus Burn",
            },
            new Card()
            {
                ID = 19,
                OtherSideId = 20,
                Name = "Ponderomotive VASIMR",
                SpectralType= SpectralType.V,
                Mass = 1,
                RadHard = 4,
                Type = CardType.Thruster,
                Thrust= 3,
                FuelUse = 1,
                FreeTurns = 0,
                AfterBurn = 1,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "c",
            },
            new Card()
            {
                ID = 20,
                OtherSideId = 19,
                Name = "Pulsed Plasmoid",
                SpectralType= SpectralType.V,
                Mass = 1,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust = 3,
                FuelUse = 1,
                FreeTurns = 0,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
            },
            new Card()
            {
                ID = 21,
                OtherSideId = 22,
                Name = "Pulsed Inductive",
                SpectralType= SpectralType.C,
                Mass = 1,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust = 4,
                FuelUse = 2,
                FreeTurns = 0,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "c",
            },
            new Card()
            {
                ID = 22,
                OtherSideId = 21,
                Name = "Dual-Stage 4-Grid",
                SpectralType= SpectralType.C,
                Mass = 0,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust = 2,
                FuelUse = 1/3d,
                FreeTurns = 1,
                AfterBurn = 0,
                IsPushable = true,
                IsSolarPowered = false,
                Requirements = "e",
            },
            new Card()
            {
                ID = 23,
                OtherSideId = 24,
                Name = "Re Solar Moth",
                SpectralType= SpectralType.D,
                Mass = 0,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust = 3,
                FuelUse = 4,
                FreeTurns = 0,
                AfterBurn = 2,
                IsPushable = true,
                IsSolarPowered = true,
                Requirements = "",
            },
            new Card()
            {
                ID = 24,
                OtherSideId = 23,
                Name = "Colliding Beam H-B Fusion",
                SpectralType= SpectralType.D,
                Mass = 2,
                RadHard = 5,
                Type = CardType.Thruster,
                Thrust = 3,
                FuelUse = 0.1d,
                FreeTurns = 1,
                AfterBurn = 2,
                IsPushable = false,
                IsSolarPowered = false,
                Requirements = "et",
            },
            
        };
    }
}